<?xml version="1.0" encoding="UTF-8"?>
<specificationSet xmlns="http://www.yawl.fit.qut.edu.au/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="Beta 7.1" xsi:schemaLocation="http://www.yawl.fit.qut.edu.au/ YAWL_SchemaBeta7.1.xsd">
  <specification uri="Blah.xml">
    <metaData/>
    <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" />
                <decomposition id="OverseeMusic" isRootNet="true" xsi:type="NetFactsType">
		                        <name>Oversee Music</name>
					<documentation/>
                        <processControlElements>
                                <inputCondition id="input">
                                        <flowsInto>
                                                <nextElementRef id="record"/>
                                        </flowsInto>
                                </inputCondition>
                                <task id="record" xsi:type="MultipleInstanceExternalTaskFactsType">
                                        <flowsInto>
                                                <nextElementRef id="finis"/>
                                        </flowsInto>
                                        <join code="xor"/>
                                        <split code="and"/>
                                        <startingMappings>
                                                <mapping>
                                                        <expression query="/OverseeMusic/songlist"/>
                                                        <mapsTo>songlist</mapsTo>
                                                </mapping>
                                                <mapping>
                                                        <expression query="/OverseeMusic/nameOfRecord"/>
                                                        <mapsTo>nameOfRecord</mapsTo>
                                                </mapping>
                                        </startingMappings>
                                        <decomposesTo id="OverseeMusic"/>
                                        <minimum>1</minimum>
                                        <maximum>10</maximum>
                                        <threshold>4</threshold>
                                        <creationMode code="dynamic"/>
          <miDataInput>
            <expression query="&lt;songlist&gt;{if ( count(/OverseeMusic/songlist/*) &gt; 0) then /OverseeMusic/songlist/* else /OverseeMusic/songList_backup/* }&lt;/songlist&gt;" />
            <splittingExpression query="for $d in /songlist/* return &lt;songLocal&gt; { for $e in $d/* return $e } &lt;/songLocal&gt;" />
            <formalInputParam>songLocal</formalInputParam>
          </miDataInput>
                                </task>
                                <outputCondition id="finis">
                                        <name>Finished case</name>
                                </outputCondition>
                        </processControlElements>
		</decomposition>
  </specification>
</specificationSet>
